<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ê¸°ê°„ìš´ì„¸</title>

<style>
body{
  background:#111;
  color:white;
  font-family:Arial;
  margin:0;
}

.container{
  max-width:420px;
  margin:auto;
  padding:20px;
}

.title{
  font-size:22px;
  font-weight:bold;
  text-align:center;
  margin-bottom:20px;
}

.card{
  background:#1a1a1a;
  border-radius:14px;
  padding:16px;
  margin-bottom:14px;
}

.cardTitle{
  font-weight:bold;
  margin-bottom:8px;
  color:#ffd56b;
}

button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:12px;
  background:#ffd56b;
  font-weight:bold;
  margin-top:10px;
}
</style>
</head>

<body>

<div class="container">

<div class="title">ğŸ“… ê¸°ê°„ìš´ì„¸</div>

<div class="card">
  <div class="cardTitle">ì˜¤ëŠ˜ì˜ ìš´ì„¸</div>
  <div id="todayBox">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
</div>

<div class="card">
  <div class="cardTitle">ë‚´ì¼ì˜ ìš´ì„¸</div>
  <div id="tomorrowBox">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
</div>

<div class="card">
  <div class="cardTitle">2026ë…„ ìš´ì„¸</div>
  <div id="yearBox">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
</div>

<button onclick="location.href='/'">í—ˆë¸Œë¡œ ëŒì•„ê°€ê¸°</button>

</div>

<script>
let todayDB={}, tomorrowDB={}, yearDB={};

async function loadDB(){
  todayDB = await fetch("/data/fortunes_ko_today.json").then(r=>r.json());
  tomorrowDB = await fetch("/data/fortunes_ko_tomorrow.json").then(r=>r.json());
  yearDB = await fetch("/data/fortunes_ko_2026.json").then(r=>r.json());
}

function randomPick(arr){
  return arr[Math.floor(Math.random()*arr.length)];
}

function renderFortune(){
  const todayArr = todayDB?.pools?.today || [];
  const tomorrowArr = tomorrowDB?.pools?.tomorrow || [];
  const yearArr = yearDB?.pools?.year_all || [];

  document.getElementById("todayBox").innerText =
    randomPick(todayArr) || "ìš´ì„¸ ë°ì´í„° ì—†ìŒ";

  document.getElementById("tomorrowBox").innerText =
    randomPick(tomorrowArr) || "ìš´ì„¸ ë°ì´í„° ì—†ìŒ";

  document.getElementById("yearBox").innerText =
    randomPick(yearArr) || "ìš´ì„¸ ë°ì´í„° ì—†ìŒ";
}

document.addEventListener("DOMContentLoaded", async ()=>{
  await loadDB();
  renderFortune();
});
</script>

</body>
</html>
