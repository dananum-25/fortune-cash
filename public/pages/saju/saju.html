<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ë¬´ë£Œ ì‚¬ì£¼ ê³„ì‚° | 4ê¸°ë‘¥(ì—°Â·ì›”Â·ì¼Â·ì‹œ) + ì˜¤í–‰ + 2026 ì„¸ìš´ ë¶„ì„</title>
<meta name="description" content="ë¡œê·¸ì¸ ì •ë³´ ê¸°ë°˜ ë¬´ë£Œ ì‚¬ì£¼ 4ê¸°ë‘¥ ê³„ì‚°(ì—°ì£¼Â·ì›”ì£¼Â·ì¼ì£¼Â·ì‹œì£¼), ì˜¤í–‰ ë¶„ì„(ëª©í™”í† ê¸ˆìˆ˜), 2026ë…„ ì„¸ìš´(ë³‘ì˜¤) í•©ì¶© ë¶„ì„ê¹Œì§€ ì œê³µí•©ë‹ˆë‹¤.">
<link rel="canonical" href="https://fortune-cash.vercel.app/pages/saju/saju.html">
<style>
body{margin:0;background:#111;color:#fff;font-family:Arial;}
.wrap{max-width:820px;margin:auto;padding:20px;}
.card{background:#1a1a1a;border-radius:16px;padding:18px;margin:16px 0;}
h1{font-size:26px;margin:0 0 10px;}
h2{margin:18px 0 10px;}
h3{margin:14px 0 8px;}
p{line-height:1.8;margin:8px 0;}
.badge{
  display:inline-block;background:#222;color:#ffd56b;
  padding:6px 10px;border-radius:12px;margin:4px 6px 4px 0;
}
.small{font-size:12px;opacity:.8}
input{
  width:100%;padding:12px;border-radius:10px;border:none;margin-top:8px;
  background:#0f0f0f;color:#fff;box-sizing:border-box;
}
button{
  width:100%;padding:14px;border:none;border-radius:12px;
  background:#ffd56b;font-weight:bold;margin-top:10px;cursor:pointer;
}
a{color:#ffd56b;text-decoration:none;}
footer{opacity:.7;font-size:12px;margin-top:40px;text-align:center;}
.hr{height:1px;background:#222;margin:14px 0;}
</style>
</head>

<body>
<div class="wrap">

<h1>ë‚˜ì˜ ì‚¬ì£¼ ë¶„ì„</h1>
<div class="small">â€» ì •í™•í•œ ì‚¬ì£¼ëŠ” ì¶œìƒì‹œê°„(ì‹œì£¼)ì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ì¶œìƒì‹œê°„ì„ ëª¨ë¥´ë©´ â€œ12ì‹œ(ì •ì˜¤)â€ë¡œ ì„ì‹œ í™•ì¸ í›„, ë‚˜ì¤‘ì— ìˆ˜ì •í•´ë„ ë©ë‹ˆë‹¤.</div>

<div id="loginCheck" class="card"></div>

<div class="card" id="timeInputBox" style="display:none;">
  <h2>â° ì¶œìƒ ì‹œê°„ ì…ë ¥</h2>
  <p>ì¶œìƒ ì‹œê°„(0~23ì‹œ)ì„ ì…ë ¥í•˜ë©´ 4ê¸°ë‘¥(ì—°Â·ì›”Â·ì¼Â·ì‹œ) + ì˜¤í–‰ + 2026 ì„¸ìš´ ë¶„ì„ì´ ìë™ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤.</p>
  <input type="number" id="birthHour" min="0" max="23" placeholder="ì¶œìƒ ì‹œê°„ (0~23ì‹œ)">
  <button onclick="calculateSaju()">ì‚¬ì£¼ ê³„ì‚°í•˜ê¸°</button>
  <div class="small" style="margin-top:10px;">
    TIP) ì¶œìƒì‹œê°„ì„ ëª¨ë¥´ë©´ 12ë¥¼ ë„£ê³  ë¨¼ì € í™•ì¸í•˜ì„¸ìš”. (ì •í™•ë„ëŠ” ì¶œìƒì‹œê°„ì„ ì•Œë©´ ë” ì˜¬ë¼ê°‘ë‹ˆë‹¤)
  </div>
</div>

<div id="sajuResult" style="display:none;">

  <div class="card">
    <h2>ğŸ“œ ë‚˜ì˜ ê¸°ë³¸ ì •ë³´</h2>
    <div id="basicInfo"></div>
  </div>

  <div class="card">
    <h2>ğŸ”® 4ê¸°ë‘¥(ì—°Â·ì›”Â·ì¼Â·ì‹œ)</h2>
    <div id="sajuBox"></div>
    <div class="small">â€» ì›”ì£¼ëŠ” ì ˆê¸°(ì…ì¶˜) ê¸°ì¤€ ê°„ì´ ë°˜ì˜ ë²„ì „ì…ë‹ˆë‹¤.</div>
  </div>

  <div class="card">
    <h2>ğŸŒ¿ ì˜¤í–‰ ë¶„ì„</h2>
    <div id="elementBox"></div>
    <div class="hr"></div>
    <div id="elementInterpretation"></div>
  </div>

  <div class="card">
    <h2>ğŸ“ˆ 2026ë…„ ì„¸ìš´(ë³‘ì˜¤) ë¶„ì„</h2>
    <div id="sewoonBox"></div>
  </div>

  <div class="card">
    <h2>âœ¨ ì¢…í•© í•´ì„</h2>
    <div id="analysisBox"></div>
  </div>

  <div class="card">
    <button onclick="location.href='/pages/period/period.html'">ì˜¤ëŠ˜/ë‚´ì¼/ì—°ê°„ ìš´ì„¸ ë³´ê¸°</button>
    <button onclick="location.href='/pages/star/index.html'">ë³„ìë¦¬ ìš´ì„¸ ë³´ê¸°</button>
    <button onclick="location.href='/'">í™ˆìœ¼ë¡œ</button>
  </div>

</div>

<footer>
ë¬´ë£Œ ìš´ì„¸ í”Œë«í¼ | <a href="/">í™ˆìœ¼ë¡œ</a>
</footer>

</div>

<script>
// ===============================
// 0) ê¸°ë³¸ í…Œì´ë¸”
// ===============================
const heavenly = ["ê°‘","ì„","ë³‘","ì •","ë¬´","ê¸°","ê²½","ì‹ ","ì„","ê³„"];
const earthly  = ["ì","ì¶•","ì¸","ë¬˜","ì§„","ì‚¬","ì˜¤","ë¯¸","ì‹ ","ìœ ","ìˆ ","í•´"];

// ===============================
// 1) 60ê°‘ì ê³„ì‚° (ì—°ì£¼/ì¼ì£¼)
// ===============================
function getYearPillar(year){
  const baseYear = 1984; // ê°‘ìë…„
  const index = (year - baseYear) % 60;
  const normalized = (index + 60) % 60;
  return heavenly[normalized % 10] + earthly[normalized % 12];
}

function getDayPillar(date){
  const baseDate = new Date(1900,0,1); // 1900-01-01 ê°‘ìì¼ (ì•µì»¤)
  const diff = Math.floor((date - baseDate) / (1000*60*60*24));
  const normalized = (diff % 60 + 60) % 60;
  return heavenly[normalized % 10] + earthly[normalized % 12];
}

// ===============================
// 2) ì›”ì£¼(ì ˆê¸° ê°„ì´) ê³„ì‚°
//    - ì…ì¶˜(ëŒ€ëµ 2/4) ì´ì „ì€ 'ì¶•'ë¡œ ì¡ê³ , ì´í›„ ì¸ì›” ì‹œì‘
// ===============================
function getMonthBranch(date){
  const month = date.getMonth() + 1;
  const day = date.getDate();

  if(month === 1) return "ì¶•";
  if(month === 2) return day < 4 ? "ì¶•" : "ì¸";
  if(month === 3) return "ë¬˜";
  if(month === 4) return "ì§„";
  if(month === 5) return "ì‚¬";
  if(month === 6) return "ì˜¤";
  if(month === 7) return "ë¯¸";
  if(month === 8) return "ì‹ ";
  if(month === 9) return "ìœ ";
  if(month === 10) return "ìˆ ";
  if(month === 11) return "í•´";
  if(month === 12) return "ì";
  return "ì¶•";
}

// ì›”ê°„ ê³µì‹: (ì—°ê°„index*2 + ì›”ì§€index) % 10
function getMonthPillar(date){
  const monthBranch = getMonthBranch(date);

  const year = date.getFullYear();
  const yearIndex = ((year - 1984) % 60 + 60) % 60;
  const yearStemIndex = yearIndex % 10;

  const branchIndex = earthly.indexOf(monthBranch);
  const monthStemIndex = (yearStemIndex * 2 + branchIndex) % 10;

  return heavenly[monthStemIndex] + monthBranch;
}

// ===============================
// 3) ì‹œì£¼ ê³„ì‚°
//    - ì‹œì§€: 2ì‹œê°„ ë‹¨ìœ„
//    - ì‹œê°„ ì²œê°„: (ì¼ê°„index*2 + ì‹œì§€index) % 10
// ===============================
function getHourBranch(hour){
  return earthly[Math.floor(((hour + 1) % 24) / 2)];
}

function getHourPillar(dayPillar, hour){
  const dayStem = dayPillar[0];
  const dayStemIndex = heavenly.indexOf(dayStem);

  const hourBranch = getHourBranch(hour);
  const hourBranchIndex = earthly.indexOf(hourBranch);

  const hourStemIndex = (dayStemIndex * 2 + hourBranchIndex) % 10;
  return heavenly[hourStemIndex] + hourBranch;
}

// ===============================
// 4) ì˜¤í–‰ ë¶„ì„
// ===============================
function getElement(char){
  const wood  = ["ê°‘","ì„","ì¸","ë¬˜"];
  const fire  = ["ë³‘","ì •","ì‚¬","ì˜¤"];
  const earth = ["ë¬´","ê¸°","ì§„","ìˆ ","ì¶•","ë¯¸"];
  const metal = ["ê²½","ì‹ ","ìœ "];      // (ì‹ ì€ ì§€ì§€ì—ë„ ì¡´ì¬)
  const water = ["ì„","ê³„","í•´","ì"];

  if(wood.includes(char))  return "ëª©";
  if(fire.includes(char))  return "í™”";
  if(earth.includes(char)) return "í† ";
  if(metal.includes(char)) return "ê¸ˆ";
  if(water.includes(char)) return "ìˆ˜";
  if(char === "ì‹ ") return "ê¸ˆ";
  return "";
}

function analyzeElements(pillars){
  const counts = {ëª©:0, í™”:0, í† :0, ê¸ˆ:0, ìˆ˜:0};
  pillars.forEach(p=>{
    for(const ch of p){
      const el = getElement(ch);
      if(el) counts[el]++;
    }
  });
  return counts;
}

function generateElementInterpretation(counts){
  let text = "";
  const elements = ["ëª©","í™”","í† ","ê¸ˆ","ìˆ˜"];

  elements.forEach(el=>{
    if(counts[el] >= 3){
      text += `<p><b>${el}</b> ê¸°ìš´ì´ ê°•í•©ë‹ˆë‹¤. ì´ ì˜¤í–‰ì´ ì„±í–¥/ì„ íƒì„ ì£¼ë„í•˜ê¸° ì‰½ìŠµë‹ˆë‹¤.</p>`;
    }else if(counts[el] === 0){
      text += `<p><b>${el}</b> ê¸°ìš´ì´ ë¶€ì¡±í•©ë‹ˆë‹¤. í•´ë‹¹ ì˜¤í–‰ì„ ë³´ì™„í•˜ë©´ ìš´ì˜ ì²´ê°ì´ ì¢‹ì•„ì§ˆ ìˆ˜ ìˆì–´ìš”.</p>`;
    }
  });

  if(counts["ëª©"] === 0) text += "<p>ğŸŒ¿ ëª© ë³´ì™„: ìì—°/ì´ˆë¡ìƒ‰/ë…ì„œ/ê¸°íšÂ·ì„±ì¥ ë£¨í‹´ì´ ë„ì›€.</p>";
  if(counts["í™”"] === 0) text += "<p>ğŸ”¥ í™” ë³´ì™„: ìš´ë™/í–‡ë¹›/í‘œí˜„Â·ë°œí‘œ/ë”°ëœ»í•œ ì¸ê°„ê´€ê³„ê°€ ë„ì›€.</p>";
  if(counts["í† "] === 0) text += "<p>ğŸª¨ í†  ë³´ì™„: ê·œì¹™ì ì¸ ìƒí™œ/ì €ì¶•/ì²´ë ¥ê´€ë¦¬/ê¸°ë°˜ ë§Œë“¤ê¸°ê°€ ë„ì›€.</p>";
  if(counts["ê¸ˆ"] === 0) text += "<p>âš™ ê¸ˆ ë³´ì™„: ì •ë¦¬ì •ëˆ/ê·œì¹™/ë¬¸ì„œí™”/ê¸ˆìœµ ê³µë¶€ê°€ ë„ì›€.</p>";
  if(counts["ìˆ˜"] === 0) text += "<p>ğŸ’§ ìˆ˜ ë³´ì™„: ëª…ìƒ/í•™ìŠµ/ì—¬í–‰/íœ´ì‹/ë¬¼ê³¼ ì¹œí•´ì§€ê¸°(ìˆ˜ì˜ ë“±)ê°€ ë„ì›€.</p>";

  return text || "<p>ì˜¤í–‰ì´ ë¹„êµì  ê³ ë¥´ê²Œ ë¶„í¬ë˜ì–´ ìˆì–´, â€˜í•œ ë°©â€™ë³´ë‹¤ â€˜ê¾¸ì¤€í•¨â€™ì´ ê°•ì ì…ë‹ˆë‹¤.</p>";
}

// ===============================
// 5) 2026 ì„¸ìš´(ë³‘ì˜¤) í•©ì¶© ë¶„ì„
// ===============================
// ì§€ì§€ ì¶©(æ²–) ìŒ
const BRANCH_CLASH = {
  "ì":"ì˜¤","ì˜¤":"ì",
  "ì¶•":"ë¯¸","ë¯¸":"ì¶•",
  "ì¸":"ì‹ ","ì‹ ":"ì¸",
  "ë¬˜":"ìœ ","ìœ ":"ë¬˜",
  "ì§„":"ìˆ ","ìˆ ":"ì§„",
  "ì‚¬":"í•´","í•´":"ì‚¬"
};

// ì§€ì§€ í•©(å…­åˆ) ìŒ
const BRANCH_COMBO = {
  "ì":"ì¶•","ì¶•":"ì",
  "ì¸":"í•´","í•´":"ì¸",
  "ë¬˜":"ìˆ ","ìˆ ":"ë¬˜",
  "ì§„":"ìœ ","ìœ ":"ì§„",
  "ì‚¬":"ì‹ ","ì‹ ":"ì‚¬",
  "ì˜¤":"ë¯¸","ë¯¸":"ì˜¤"
};

// ì²œê°„ í•©(å¹²åˆ)
const STEM_COMBO = {
  "ê°‘":"ê¸°","ê¸°":"ê°‘",
  "ì„":"ê²½","ê²½":"ì„",
  "ë³‘":"ì‹ ","ì‹ ":"ë³‘",
  "ì •":"ì„","ì„":"ì •",
  "ë¬´":"ê³„","ê³„":"ë¬´"
};

function sewoonAnalyze(pillars){
  const sewoon = "ë³‘ì˜¤"; // 2026ë…„ ì„¸ìš´
  const sStem = sewoon[0];
  const sBranch = sewoon[1];

  const hits = {
    branchCombo: [],
    branchClash: [],
    stemCombo: []
  };

  pillars.forEach((p, idx)=>{
    const label = ["ì—°ì£¼","ì›”ì£¼","ì¼ì£¼","ì‹œì£¼"][idx] || "ê¸°ë‘¥";
    const pStem = p[0];
    const pBranch = p[1];

    // ì§€ì§€ í•©
    if(BRANCH_COMBO[pBranch] === sBranch){
      hits.branchCombo.push(`${label}(${p}) â†” ì„¸ìš´(${sewoon}) ì§€ì§€í•©`);
    }
    // ì§€ì§€ ì¶©
    if(BRANCH_CLASH[pBranch] === sBranch){
      hits.branchClash.push(`${label}(${p}) â†” ì„¸ìš´(${sewoon}) ì§€ì§€ì¶©`);
    }
    // ì²œê°„ í•©
    if(STEM_COMBO[pStem] === sStem){
      hits.stemCombo.push(`${label}(${p}) â†” ì„¸ìš´(${sewoon}) ì²œê°„í•©`);
    }
  });

  // í•´ì„ ë¬¸ì¥ ë§Œë“¤ê¸°
  let html = `<p><b>2026ë…„ ì„¸ìš´:</b> <span class="badge">${sewoon}</span> (ë¶ˆì˜ ê¸°ìš´(í™”)ì´ ê°•í•œ í•´ë¡œ â€œì†ë„/ê²°ì •/ë…¸ì¶œâ€ì´ ê°•ì¡°ë©ë‹ˆë‹¤.)</p>`;

  if(!hits.branchCombo.length && !hits.branchClash.length && !hits.stemCombo.length){
    html += `<p>ì˜¬í•´(ë³‘ì˜¤)ì™€ì˜ í•©ì¶© ì‹ í˜¸ê°€ ê°•í•˜ê²Œ ì¡íˆì§„ ì•ŠìŠµë‹ˆë‹¤. ëŒ€ì‹  ê¸°ë³¸ ì‚¬ì£¼ íë¦„(ì˜¤í–‰ ë°¸ëŸ°ìŠ¤)ì„ ìš°ì„ ìœ¼ë¡œ ë³´ë©´ ì¢‹ì•„ìš”.</p>`;
    html += `<p class="small">â€» ê·¸ë˜ë„ â€˜í™”(ç«)â€™ ê¸°ìš´ì´ ê°•í•œ í•´ë¼, ê²°ì •/ë°œí‘œ/ë…¸ì¶œ/ì†ë„ì „ ì´ìŠˆê°€ ìƒê¸¸ ìˆ˜ ìˆì–´ìš”.</p>`;
    return html;
  }

  if(hits.branchCombo.length){
    html += `<h3>âœ… í•©(åˆ) í¬ì¸íŠ¸</h3>`;
    html += `<p>ì˜¬í•´ëŠ” â€œì—°ê²°/í˜‘ë ¥/ë„ì›€â€ì´ ìƒê¸°ê¸° ì‰¬ìš´ êµ¬ì¡°ì…ë‹ˆë‹¤.</p>`;
    hits.branchCombo.forEach(t=> html += `<p>â€¢ ${t}</p>`);
    html += `<p class="small">í•©ì´ ëœ¨ë©´: ì œíœ´/ì†Œê°œ/í˜‘ì—…/ê´€ê³„ í™•ì¥ì´ ìœ ë¦¬í•œ í¸ì…ë‹ˆë‹¤.</p>`;
  }

  if(hits.stemCombo.length){
    html += `<h3>âœ… ì²œê°„í•© í¬ì¸íŠ¸</h3>`;
    html += `<p>ì¼/ëˆ/ê´€ê³„ì—ì„œ â€˜íƒ€ì´ë°ì´ ë§ëŠ”â€™ ëŠë‚Œì´ ì˜¤ê¸° ì‰½ìŠµë‹ˆë‹¤. ê³„ì•½/í˜‘ìƒì€ ì¡°ê±´ë§Œ ì˜ ë³´ì„¸ìš”.</p>`;
    hits.stemCombo.forEach(t=> html += `<p>â€¢ ${t}</p>`);
  }

  if(hits.branchClash.length){
    html += `<h3>âš ï¸ ì¶©(æ²–) í¬ì¸íŠ¸</h3>`;
    html += `<p>ì˜¬í•´ëŠ” ë³€í™”Â·ì´ë™Â·ì •ë¦¬ ì´ìŠˆê°€ ê°•í•˜ê²Œ ë“¤ì–´ì˜¬ ìˆ˜ ìˆì–´ìš”. â€˜ê¸‰ë°œì§„â€™ë§Œ ì£¼ì˜í•˜ë©´ ì˜¤íˆë ¤ ê¸°íšŒê°€ ë©ë‹ˆë‹¤.</p>`;
    hits.branchClash.forEach(t=> html += `<p>â€¢ ${t}</p>`);
    html += `<p class="small">ì¶©ì´ ëœ¨ë©´: ì´ì§/ì´ì‚¬/ê´€ê³„ ì¬ì •ë ¬/ë£¨í‹´ ë³€í™”ê°€ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•ˆì „/ê±´ê°•/ì¶©ë™ì†Œë¹„ ê´€ë¦¬ ì¶”ì²œ.</p>`;
  }

  return html;
}
function analyzeSeowoonWithElements(elementCounts){

  const fireCount = elementCounts["í™”"] || 0;
  let text = "";

  text += `<h3>ğŸ”¥ 2026ë…„ í™”(ç«) ê¸°ìš´ ì˜í–¥</h3>`;

  if(fireCount >= 3){
    text += `
      <p>ì›êµ­ì— ì´ë¯¸ í™”(ç«) ê¸°ìš´ì´ ê°•í•œ í¸ì…ë‹ˆë‹¤.</p>
      <p>2026ë…„ì€ í™”ì˜ í•´(ë³‘ì˜¤)ë¼, ê³¼ì—´Â·ì†ë„ì „Â·ê°ì •ê¸°ë³µì´ ì»¤ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
      <p><b>ì£¼ì˜:</b> ì¶©ë™ ì†Œë¹„, ê¸‰í•œ ê²°ì •, ì¸ê°„ê´€ê³„ ê°ˆë“± ê´€ë¦¬ í•„ìš”.</p>
      <p><b>ê¸°íšŒ:</b> ë§ˆì¼€íŒ…Â·ë…¸ì¶œÂ·ë°œí‘œÂ·SNSÂ·ìœ íŠœë¸Œ í™œë™ì€ ê°•ì ì´ ë©ë‹ˆë‹¤.</p>
    `;
  }
  else if(fireCount === 0){
    text += `
      <p>ì›êµ­ì— í™”(ç«) ê¸°ìš´ì´ ë¶€ì¡±í•œ í¸ì…ë‹ˆë‹¤.</p>
      <p>2026ë…„ì€ ë¶€ì¡±í•œ í™”ë¥¼ ì±„ì›Œì£¼ëŠ” í•´ì…ë‹ˆë‹¤.</p>
      <p><b>ê¸°íšŒ:</b> ë„ì „Â·ì‹œì‘Â·ì´ì§Â·ì°½ì—…Â·ë¸Œëœë”©ì— ìœ ë¦¬.</p>
      <p>ê·¸ë™ì•ˆ ë¯¸ë¤„ë‘” ì¼ì„ ì‹¤í–‰í•˜ê¸° ì¢‹ì€ í•´ì…ë‹ˆë‹¤.</p>
    `;
  }
  else{
    text += `
      <p>í™”(ç«) ê¸°ìš´ì´ ì ë‹¹íˆ ì¡´ì¬í•©ë‹ˆë‹¤.</p>
      <p>2026ë…„ì€ í™œë™ì„±ê³¼ ì¶”ì§„ë ¥ì´ ìƒìŠ¹í•˜ëŠ” í•´ì…ë‹ˆë‹¤.</p>
      <p>ì ê·¹ì ìœ¼ë¡œ ì›€ì§ì´ë©´ ì„±ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
    `;
  }

  return text;
}
// ===============================
// 6) ë©”ì¸ ê³„ì‚°
// ===============================
function calculateSaju(){

  const name = localStorage.getItem("name") || "íšŒì›";
  const birth = localStorage.getItem("birth");
  const hour = parseInt(document.getElementById("birthHour").value, 10);

  if(!birth){
    alert("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤. (ìƒë…„ì›”ì¼ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤)");
    return;
  }
  if(Number.isNaN(hour) || hour < 0 || hour > 23){
    alert("ì¶œìƒ ì‹œê°„ì„ 0~23 ì‚¬ì´ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.");
    return;
  }

  const birthDate = new Date(birth);
  const year = birthDate.getFullYear();

  const yearPillar  = getYearPillar(year);
  const monthPillar = getMonthPillar(birthDate);
  const dayPillar   = getDayPillar(birthDate);
  const hourPillar  = getHourPillar(dayPillar, hour);

  const pillars = [yearPillar, monthPillar, dayPillar, hourPillar];

  // í™”ë©´ í‘œì‹œ
  document.getElementById("timeInputBox").style.display="none";
  document.getElementById("sajuResult").style.display="block";

  document.getElementById("basicInfo").innerHTML =
    `<p><b>${name}</b></p>
     <p>ìƒë…„ì›”ì¼: ${birth}</p>
     <p>ì¶œìƒì‹œê°„: ${hour}ì‹œ</p>`;

  document.getElementById("sajuBox").innerHTML =
    `<span class="badge">ì—°ì£¼: ${yearPillar}</span>
     <span class="badge">ì›”ì£¼: ${monthPillar}</span>
     <span class="badge">ì¼ì£¼: ${dayPillar}</span>
     <span class="badge">ì‹œì£¼: ${hourPillar}</span>`;

  // ì˜¤í–‰ ë¶„ì„
  const elementResult = analyzeElements(pillars);
  let strongest = Object.keys(elementResult).reduce((a,b)=> elementResult[a] > elementResult[b] ? a : b);

  let elementHtml = "";
  ["ëª©","í™”","í† ","ê¸ˆ","ìˆ˜"].forEach(k=>{
    elementHtml += `<p><b>${k}</b>: ${elementResult[k]}ê°œ</p>`;
  });
  elementHtml += `<p><b>ê°€ì¥ ê°•í•œ ê¸°ìš´:</b> ${strongest}</p>`;

  document.getElementById("elementBox").innerHTML = elementHtml;
  document.getElementById("elementInterpretation").innerHTML = generateElementInterpretation(elementResult);

  // 2026 ì„¸ìš´ í•©ì¶©
  let seowoonHtml = sewoonAnalyze(pillars);
seowoonHtml += analyzeSeowoonWithElements(elementResult);

document.getElementById("sewoonBox").innerHTML = seowoonHtml;

  // ì¢…í•© í•´ì„(ê°„ë‹¨)
  let analysis = "";
  analysis += `<p>ë‹¹ì‹ ì˜ 4ê¸°ë‘¥ì€ <b>${yearPillar} / ${monthPillar} / ${dayPillar} / ${hourPillar}</b> íë¦„ìœ¼ë¡œ ì •ë¦¬ë©ë‹ˆë‹¤.</p>`;
  analysis += `<p>ì˜¤í–‰ ê´€ì ì—ì„œëŠ” <b>${strongest}</b> ê¸°ìš´ì´ ìƒëŒ€ì ìœ¼ë¡œ ê°•í•´, ì˜¬í•´ëŠ” ê·¸ íŠ¹ì„±ì´ â€œê²°ì •/ì„ íƒâ€ì— ì˜í–¥ì„ ì£¼ê¸° ì‰¬ì›Œìš”.</p>`;
  analysis += `<p class="small">TIP) ì´ í˜ì´ì§€ëŠ” â€œë¬´ë£Œ/ê°„í¸ í•´ì„â€ ë²„ì „ì´ë¼, ì¶”í›„ ëŒ€ìš´/ì„¸ìš´ í™•ì¥í•˜ë©´ í›¨ì”¬ ë” ì •ë°€í•´ì§‘ë‹ˆë‹¤.</p>`;
const daewoonHtml = generateDaewoon(yearPillar, year);
analysis += daewoonHtml;
  const currentDaewoon = getCurrentDaewoonPillar(year);
analysis += analyzeDaewoonVsSeowoon(currentDaewoon);
  const scores = calculateFortuneScores(elementResult, currentDaewoon);

analysis += `
<h3>ğŸ“Š 2026 ìš´ì„¸ ì ìˆ˜</h3>
<p>ğŸ’° ì¬ë¬¼ìš´: <b>${scores.wealth}ì </b></p>
<p>ğŸ’– ì—°ì• ìš´: <b>${scores.love}ì </b></p>
<p>ğŸ¢ ì§ì¥/ì‚¬ì—…ìš´: <b>${scores.career}ì </b></p>
<p>ğŸ’ª ê±´ê°•ìš´: <b>${scores.health}ì </b></p>
`;
  analysis += generateScoreInterpretation(scores);
  document.getElementById("analysisBox").innerHTML = analysis;
}

// ===============================
// 7) ì´ˆê¸° ì§„ì… ì²˜ë¦¬
// ===============================
document.addEventListener("DOMContentLoaded", function(){
  const birth = localStorage.getItem("birth");

  if(!birth){
    document.getElementById("loginCheck").innerHTML =
      "<h2>âš  ë¡œê·¸ì¸ í•„ìš”</h2><p>ì‚¬ì£¼ ê³„ì‚°ì€ ë¡œê·¸ì¸ í›„ ìƒë…„ì›”ì¼ì´ ì €ì¥ë˜ì–´ì•¼ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p><p class='small'>ë©”ì¸ìœ¼ë¡œ ê°€ì„œ ë¡œê·¸ì¸(íšŒì›ê°€ì…) í›„ ë‹¤ì‹œ ë“¤ì–´ì™€ì£¼ì„¸ìš”.</p>";
    document.getElementById("timeInputBox").style.display="none";
    return;
  }

  document.getElementById("loginCheck").innerHTML =
    "<h2>âœ… ì¤€ë¹„ ì™„ë£Œ</h2><p>ì¶œìƒ ì‹œê°„ì„ ì…ë ¥í•˜ë©´ 4ê¸°ë‘¥ + ì˜¤í–‰ + 2026 ì„¸ìš´ ë¶„ì„ì„ ë³´ì—¬ì¤„ê²Œìš”.</p>";
  document.getElementById("timeInputBox").style.display="block";

  function generateDaewoon(startYearPillar, birthYear){

  const baseYear = 1984; // ê°‘ìë…„ ê¸°ì¤€
  const yearIndex = ((birthYear - baseYear) % 60 + 60) % 60;

  let html = "<h3>ğŸ“ˆ ëŒ€ìš´(10ë…„ ìš´) íë¦„</h3>";

  for(let i=1;i<=8;i++){
    const ageStart = i*10;
    const pillarIndex = (yearIndex + i) % 60;

    const stem = heavenly[pillarIndex % 10];
    const branch = earthly[pillarIndex % 12];
    const pillar = stem + branch;

    html += `
      <p><b>${ageStart}ì„¸ ~ ${ageStart+9}ì„¸</b> :
      <span class="badge">${pillar}</span></p>
    `;
  }

  html += `<p class="small">
    â€» ê°„ì´ ëŒ€ìš´ ê³„ì‚° ë²„ì „ì…ë‹ˆë‹¤. (ì ˆê¸°Â·ìˆœí–‰Â·ì—­í–‰ ë¯¸ì ìš©)
  </p>`;

  return html;
  }
  function getCurrentDaewoonPillar(birthYear){

  const currentYear = 2026;
  const age = currentYear - birthYear;

  const daewoonIndex = Math.floor(age / 10);

  const baseYear = 1984;
  const yearIndex = ((birthYear - baseYear) % 60 + 60) % 60;

  const pillarIndex = (yearIndex + daewoonIndex) % 60;

  const stem = heavenly[pillarIndex % 10];
  const branch = earthly[pillarIndex % 12];

  return stem + branch;
  }
  function analyzeDaewoonVsSeowoon(currentDaewoon){

  const seowoon = "ë³‘ì˜¤";
  const sStem = seowoon[0];
  const sBranch = seowoon[1];

  const dStem = currentDaewoon[0];
  const dBranch = currentDaewoon[1];

  let html = "<h3>ğŸ”¥ í˜„ì¬ ëŒ€ìš´ Ã— 2026 ì„¸ìš´ ë¶„ì„</h3>";

  // ì§€ì§€ ì¶©
  if(BRANCH_CLASH[dBranch] === sBranch){
    html += `
      <p><b>âš  ê°•í•œ ë³€í™” ìš´</b></p>
      <p>í˜„ì¬ ëŒ€ìš´(${currentDaewoon})ê³¼ ì„¸ìš´(${seowoon})ì´ ì¶©í•©ë‹ˆë‹¤.</p>
      <p>ì´ì§, ì´ì‚¬, ê´€ê³„ ì •ë¦¬, ì‚¬ì—… ë°©í–¥ ìˆ˜ì • ê°€ëŠ¥ì„±.</p>
    `;
  }

  // ì§€ì§€ í•©
  else if(BRANCH_COMBO[dBranch] === sBranch){
    html += `
      <p><b>âœ… í™•ì¥ ìš´</b></p>
      <p>í˜„ì¬ ëŒ€ìš´ê³¼ ì„¸ìš´ì´ í•©ì„ ì´ë£¹ë‹ˆë‹¤.</p>
      <p>í˜‘ë ¥Â·í™•ì¥Â·ê´€ê³„ ë„ì›€ ìš´ ìƒìŠ¹.</p>
    `;
  }

  else{
    html += `
      <p>í° ì¶©í•© êµ¬ì¡°ëŠ” ì•„ë‹™ë‹ˆë‹¤.</p>
      <p>ê¸°ë³¸ íë¦„ì„ ì•ˆì •ì ìœ¼ë¡œ ìœ ì§€í•˜ëŠ” í•´ì…ë‹ˆë‹¤.</p>
    `;
  }

  return html;
  }
  function calculateFortuneScores(elementCounts, currentDaewoon){

  let scores = {
    wealth: 60,
    love: 60,
    career: 60,
    health: 60
  };

  const fire = elementCounts["í™”"] || 0;
  const water = elementCounts["ìˆ˜"] || 0;
  const metal = elementCounts["ê¸ˆ"] || 0;
  const wood = elementCounts["ëª©"] || 0;
  const earth = elementCounts["í† "] || 0;

  // ğŸ”¥ 2026ì€ í™”ì˜ í•´ (ë³‘ì˜¤)
  // í™” ë§ìœ¼ë©´ ì¶”ì§„ë ¥ â†‘ but ê³¼ì—´ ìœ„í—˜
  if(fire >= 3){
    scores.career += 10;
    scores.love += 5;
    scores.health -= 5;
  }
  else if(fire === 0){
    scores.career += 5;
    scores.wealth += 5;
  }

  // ğŸ’° ê¸ˆ/ìˆ˜ëŠ” ì¬ë¬¼ ê´€ë ¨
  if(metal >= 2) scores.wealth += 10;
  if(water >= 2) scores.wealth += 5;

  // ğŸŒ¿ ëª©ì€ ì¸ê°„ê´€ê³„
  if(wood >= 2) scores.love += 10;

  // ğŸª¨ í† ëŠ” ì•ˆì •ì„±
  if(earth >= 2) scores.health += 10;

  // ëŒ€ìš´ ì˜í–¥
  const dBranch = currentDaewoon[1];
  if(dBranch === "ì˜¤" || dBranch === "ì‚¬"){
    scores.career += 5;
  }

  // ì ìˆ˜ ë³´ì • (0~100)
  Object.keys(scores).forEach(k=>{
    if(scores[k] > 95) scores[k] = 95;
    if(scores[k] < 30) scores[k] = 30;
  });

  return scores;
  }
  function generateScoreInterpretation(scores){

  function interpret(score, type){
    if(score >= 80) return "ë§¤ìš° ê°•í•œ íë¦„ì…ë‹ˆë‹¤. ì ê·¹ì ìœ¼ë¡œ ì›€ì§ì´ë©´ ì„±ê³¼ê°€ í½ë‹ˆë‹¤.";
    if(score >= 65) return "ì¢‹ì€ íë¦„ì…ë‹ˆë‹¤. ì¤€ë¹„í•œ ë§Œí¼ ê²°ê³¼ê°€ ë‚˜ì˜µë‹ˆë‹¤.";
    if(score >= 50) return "í‰ê· ì ì¸ íë¦„ì…ë‹ˆë‹¤. ë¬´ë¦¬í•˜ì§€ ì•ŠëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.";
    return "ì£¼ì˜ê°€ í•„ìš”í•œ ì‹œê¸°ì…ë‹ˆë‹¤. ë³´ìˆ˜ì ìœ¼ë¡œ ìš´ì˜í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.";
  }

  return `
  <h3>ğŸ§  2026ë…„ ì¢…í•© í•´ì„</h3>

  <p><b>ğŸ’° ì¬ë¬¼ìš´:</b> ${interpret(scores.wealth,"wealth")}</p>
  <p><b>ğŸ’– ì—°ì• ìš´:</b> ${interpret(scores.love,"love")}</p>
  <p><b>ğŸ¢ ì§ì¥/ì‚¬ì—…ìš´:</b> ${interpret(scores.career,"career")}</p>
  <p><b>ğŸ’ª ê±´ê°•ìš´:</b> ${interpret(scores.health,"health")}</p>

  <p style="margin-top:15px;">
  2026ë…„ì€ ê¸°ë³¸ì ìœ¼ë¡œ í™”(ç«)ì˜ í•´ì…ë‹ˆë‹¤.
  ë‹¹ì‹ ì˜ ì‚¬ì£¼ êµ¬ì¡°ì— ë”°ë¼ ì†ë„Â·ê²°ì •Â·ë³€í™”ê°€ í‚¤ì›Œë“œê°€ ë©ë‹ˆë‹¤.
  ì ìˆ˜ê°€ ë†’ì€ ì˜ì—­ì€ ê³¼ê°íˆ í™•ì¥í•˜ê³ ,
  ë‚®ì€ ì˜ì—­ì€ ë¦¬ìŠ¤í¬ ê´€ë¦¬ì— ì§‘ì¤‘í•˜ì„¸ìš”.
  </p>
  `;
  }
});
</script>

</body>
</html>
